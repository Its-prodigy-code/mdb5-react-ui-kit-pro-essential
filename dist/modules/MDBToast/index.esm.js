import t,{useState as e,useEffect as r,useRef as n,useCallback as o}from"react";import a from"react-dom";import i from"clsx";var l=function(){return l=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},l.apply(this,arguments)};function c(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}var s=t.forwardRef((function(e,r){var n=e.className,o=e.color,a=e.children,s=c(e,["className","color","children"]),u=i("toast-header",o&&"bg-"+o,o&&"light"!==o&&"text-white",n);return t.createElement("div",l({className:u,ref:r},s),a)})),u=t.forwardRef((function(e,r){var n=e.className,o=e.children,a=e.color,s=c(e,["className","children","color"]),u=i("toast-body",a&&"light"!==a&&"text-white",n);return t.createElement("div",l({className:u,ref:r},s),o)})),f=function(n){var o=c(n,[]),a=e(!1),s=a[0],u=a[1],f=i("ripple-wave",s&&"active");return r((function(){var t=setTimeout((function(){u(!0)}),50);return function(){clearTimeout(t)}}),[]),t.createElement("div",l({className:f},o))},p=t.forwardRef((function(n,o){var a=n.className,s=n.rippleTag,u=n.rippleCentered,p=n.rippleDuration,d=n.rippleUnbound,m=n.rippleRadius,h=n.rippleColor,g=n.children,b=n.onClick,v=c(n,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick"]),y=[0,0,0],w=["primary","secondary","success","danger","warning","info","light","dark"],C=e([]),N=C[0],k=C[1],x=e(!1),R=x[0],E=x[1],T=i("ripple","ripple-surface",d&&"ripple-surface-unbound",R&&"ripple-surface-"+h,a),O=function(){if(w.find((function(t){return t===(null==h?void 0:h.toLowerCase())})))return E(!0);var t=L(h).join(",");return"radial-gradient(circle, "+"rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join(""+t)+")"},L=function(t){return"transparent"===t.toLowerCase()?y:"#"===t[0]?function(t){return t.length<7&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}(t):(-1===t.indexOf("rgb")&&(t=function(t){var e=document.body.appendChild(document.createElement("fictum")),r="rgb(1, 2, 3)";return e.style.color=r,e.style.color!==r?y:(e.style.color=t,e.style.color===r||""===e.style.color?y:(t=getComputedStyle(e).color,document.body.removeChild(e),t))}(t)),0===t.indexOf("rgb")?function(t){return(t=t.match(/[.\d]+/g).map((function(t){return+Number(t)}))).length=3,t}(t):y)},j=function(t){var e=t.target.getBoundingClientRect(),r=t.clientX-e.left,n=t.clientY-e.top,o=e.height,a=e.width,i=p&&.5*p,c=p&&p-.5*p,s=function(t){var e=t.offsetX,r=t.offsetY,n=t.height,o=t.width,a=r<=n/2,i=e<=o/2,l=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},c=r===n/2&&e===o/2,s=!0===a&&!1===i,u=!0===a&&!0===i,f=!1===a&&!0===i,p=!1===a&&!1===i,d={topLeft:l(e,r),topRight:l(o-e,r),bottomLeft:l(e,n-r),bottomRight:l(o-e,n-r)},m=0;return c||p?m=d.topLeft:f?m=d.topRight:u?m=d.bottomRight:s&&(m=d.bottomLeft),2*m}({offsetX:u?o/2:r,offsetY:u?a/2:n,height:o,width:a}),f=m||s/2,d={left:u?a/2-f+"px":r-f+"px",top:u?o/2-f+"px":n-f+"px",height:m?2*m+"px":s+"px",width:m?2*m+"px":s+"px",transitionDelay:"0s, "+i+"ms",transitionDuration:p+"ms, "+c+"ms"};return R?d:l(l({},d),{backgroundImage:""+O()})};return r((function(){var t=setTimeout((function(){N.length>0&&k(N.splice(1,N.length-1))}),p);return function(){clearTimeout(t)}}),[p,N]),t.createElement(s,l({className:T,onClick:function(t){return function(t){var e=j(t),r=N.concat(e);k(r),b&&b(t)}(t)},ref:o},v),g,N.map((function(e,r){return t.createElement(f,{key:r,style:e})})))}));p.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var d=t.forwardRef((function(r,n){var o=r.className,a=r.color,s=r.outline,u=r.children,f=r.rounded,d=r.disabled,m=r.floating,h=r.size,g=r.href,b=r.block,v=r.active,y=r.toggle,w=r.noRipple,C=r.tag,N=c(r,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),k=e(v||!1),x=k[0],R=k[1],E=a&&["light","link"].includes(a)||s?"dark":"light",T=i("none"!==a&&"btn","none"!==a?s?a?"btn-outline-"+a:"btn-outline-primary":a?"btn-"+a:"btn-primary":"",f&&"btn-rounded",m&&"btn-floating",h&&"btn-"+h,(g||"button"!==C)&&d?"disabled":"",b&&"btn-block",x&&"active",o);return g&&"a"!==C&&(C="a"),["hr","img","input"].includes(C)||w?t.createElement(C,l({className:T,onClick:y?function(){R(!x)}:void 0,disabled:!(!d||"button"!==C)||void 0,href:g,ref:n},N),u):t.createElement(p,l({rippleTag:C,rippleColor:E,className:T,onClick:y?function(){R(!x)}:void 0,disabled:!(!d||"button"!==C)||void 0,href:g,ref:n},N),u)}));d.defaultProps={tag:"button",role:"button",color:"primary"};var m=t.forwardRef((function(e,r){var n=e.className,o=e.white,a=e.children,s=c(e,["className","white","children"]),u=i("btn-close",o&&"btn-close-white",n);return t.createElement(d,l({className:u,color:"none",ref:r},s),a)})),h=function(f){var p=f.className,d=f.position,h=f.delay,g=f.autohide,b=f.width,v=f.containerRef,y=f.toastRef,w=f.offset,C=f.stacking,N=f.appendToBody,k=f.color,x=f.triggerRef,R=f.show,E=f.bodyContent,T=f.headerContent,O=f.bodyClasses,L=f.headerClasses,j=f.closeBtnClasses,P=c(f,["className","position","delay","autohide","width","containerRef","toastRef","offset","stacking","appendToBody","color","triggerRef","show","bodyContent","headerContent","bodyClasses","headerClasses","closeBtnClasses"]),I=e(R),B=I[0],D=I[1],S=e(R),M=S[0],X=S[1],Y=e({}),q=Y[0],z=Y[1],A=e(B?"block":"none"),U=A[0],F=A[1],G=e(0),H=G[0],J=G[1],K=n(null),Q=y||K,V=i("toast","fade",d&&!v&&"toast-fixed",d&&"toast-"+d,v&&"toast-absolute",k&&"bg-"+k,B&&M&&"show",C&&"stacking-toast",p);r((function(){var t,e;if(d){var r=d.split("-")[0],n=d.split("-")[1],o="top"===r?"bottom":"top",a="left"===n?"right":"left";z("center"===n?((t={})[r]=(w&&w+H)+"px",t.left="50%",t[o]="unset",t.transform="translate(-50%)",t):((e={})[r]=(w&&w+H)+"px",e[n]=w+"px",e[o]="unset",e[a]="unset",e.transform="unset",e))}}),[w,d,H]);r((function(){if(C&&B){var t=document.querySelectorAll(".toast-"+d),e=0,r=v?"toast-absolute":"toast-fixed",n=Array.from(t).filter((function(t){return t.classList.contains("show")&&t!==Q.current&&t.classList.contains(r)&&t.classList.contains("stacking-toast")}));if(n.length>0){var o=void 0;o="top"===(null==d?void 0:d.split("-")[0])?n[n.length-1].style.top:n[n.length-1].style.bottom;var a=parseInt(o.split("px")[0]);e=w?a+w:a}J(e)}}),[C,B,Q,H,w,d,v]);var W=o((function(){D(!0)}),[]);r((function(){B&&F("block"),B||M||F("none")}),[B,M]),r((function(){D(R)}),[R]),r((function(){if(null!=x){var t=x.current;return x.current.addEventListener("click",W),function(){t.removeEventListener("click",W)}}}),[x,W]),r((function(){null!=v&&v.current.classList.add("parent-toast-relative")}),[v]),r((function(){var t;return g&&B&&(t=setTimeout((function(){D(!1)}),h)),function(){clearTimeout(t)}}),[g,B,h]),r((function(){var t,e;return B?t=setTimeout((function(){X(!0)}),100):B||(e=setTimeout((function(){X(!1)}),100)),function(){clearTimeout(t),clearTimeout(e)}}),[B,g]);var Z=t.createElement("div",l({className:V,ref:Q,style:l(l({},q),{width:"unset"===b?b:b+"px",display:U})},P),T&&t.createElement(s,{className:L,color:k},T,t.createElement(m,{onClick:function(){D(!1)},className:j,white:!(!k||"light"===k)})),t.createElement(u,{className:O,color:k},E));return B||M?N?a.createPortal(Z,document.body):Z:t.createElement(t.Fragment,null)};h.defaultProps={offset:10,width:"width",delay:1e3,show:!1};export{h as default};
