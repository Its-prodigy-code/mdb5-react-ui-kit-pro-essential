import e from"clsx";import t,{useState as n,useRef as i,useCallback as a,useEffect as r,useContext as o}from"react";var l=function(){return l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}var c=function(o){var c=o.animation,u=o.animationRef,m=o.delay,d=o.infinite,f=o.duration,p=o.enableTarget,g=o.target,v=o.repeatOnScroll,y=o.reset,h=o.setTarget,E=o.start,b=o.className,w=o.tag,O=o.children,T=o.style,S=s(o,["animation","animationRef","delay","infinite","duration","enableTarget","target","repeatOnScroll","reset","setTarget","start","className","tag","children","style"]),C=n(g),I=C[0],N=C[1],x=n(!1),H=x[0],D=x[1],L=i(!0),P=e(I&&"animation",I&&c,b),j=i(null),B=u||j,F=function(){N(!I)},R=a((function(){if(B.current){var e=B.current.getBoundingClientRect().top+document.body.scrollTop,t=B.current.offsetHeight,n=e<=window.innerHeight&&e+t>=0;n&&L.current?(L.current=!1,m?setTimeout((function(){N(!0),D(!0)}),m):(N(!0),D(!0))):!n&&v&&(D(!1),L.current=!0)}}),[B,v,m]);return r((function(){return"onScroll"===E&&window.addEventListener("scroll",R),function(){window.removeEventListener("scroll",R)}}),[R,E]),r((function(){N(g)}),[g]),r((function(){"onLoad"===E&&N(!0)}),[E]),r((function(){I&&!d&&y&&setTimeout((function(){N(!I),p&&h(!1)}),f)}),[I,f,p,h,d,y]),t.createElement(t.Fragment,null,"onClick"===E&&!1===p&&t.createElement(w,l({onClick:F,className:P,ref:B},S,{style:l(l({},T),{animationDuration:f+"ms",animationIterationCount:d?"infinite":null,animationDelay:m?m+"ms":null})}),O),"onHover"===E&&!1===p&&t.createElement(w,l({onMouseEnter:F,className:P,ref:B},S,{style:l(l({},T),{animationDuration:f+"ms",animationIterationCount:d?"infinite":null,animationDelay:m?m+"ms":null})}),O),("onLoad"===E||!0===p)&&t.createElement(w,l({className:P,ref:B},S,{style:l(l({},T),{animationDuration:f+"ms",animationIterationCount:d?"infinite":null,animationDelay:m?m+"ms":null})}),O),"onScroll"===E&&t.createElement(w,l({className:P,ref:B},S,{style:l(l({},T),{animationDuration:f+"ms",visibility:H?"visible":"hidden",animationIterationCount:d?"infinite":null})}),O))};c.defaultProps={tag:"div",start:"onClick",duration:500,reset:!1,animation:"slide-right",target:!1,enableTarget:!1,repeatOnScroll:!1,infinite:!1};var u=t.createContext({activeItem:1,setActiveItem:null,stepperHeight:0,setStepperHeight:null,prevState:1,setPrevState:null,steps:[],linear:!1,visited:[],setVisited:null,noEditable:!1,vertical:!1,mobile:!1,verticalBreakpoint:!1}),m=t.createContext({itemId:0}),d=function(d){var f=d.className,p=d.children,g=d.tag,v=d.stepperRef,y=s(d,["className","children","tag","stepperRef"]),h=o(u),E=h.activeItem,b=h.prevState,w=h.vertical,O=o(m).itemId,T=n(!!w||O===E),S=T[0],C=T[1],I=n(!1),N=I[0],x=I[1],H=n(0),D=H[0],L=H[1],P=n({paddingTop:0,paddingBottom:0}),j=P[0],B=P[1],F=i(null),R=v||F,k=e("stepper-content","py-3",w&&!S&&"stepper-content-hide",f),z=a((function(){var e=R.current;if(e){var t=void 0;E===O?(e.style.height="",t=e.scrollHeight):t=e.scrollHeight+j.paddingTop+j.paddingBottom,e.style.height=t+"px"}}),[E,O,R,j]);return r((function(){w||C(O===E)}),[O,E,b,w]),r((function(){w||O===b&&(x(!0),setTimeout((function(){x(!1)}),800))}),[O,b,w]),r((function(){if(w){if(0===D){var e=R.current,t=e.scrollHeight,n=window.getComputedStyle(e);B({paddingTop:parseFloat(n.paddingTop),paddingBottom:parseFloat(n.paddingBottom)}),L(t)}C(O===E)}}),[R,w,O,E,D]),r((function(){if(w)return window.addEventListener("resize",z),function(){window.removeEventListener("resize",z)}}),[w,z]),r((function(){dispatchEvent(new Event("resize"))}),[p]),t.createElement(t.Fragment,null,w?t.createElement(g,l({className:k,ref:R},y,{style:{height:D+"px"}}),p):t.createElement(t.Fragment,null,(S||N)&&t.createElement(c,l({start:"onLoad",animation:N?E>b?"slide-out-left":E<b?"slide-out-right":"":b&&E>b?"slide-in-right":E<b?"slide-in-left":"",duration:800,className:k},y),t.createElement("span",null,p))))};d.defaultProps={tag:"div"};export{d as default};
