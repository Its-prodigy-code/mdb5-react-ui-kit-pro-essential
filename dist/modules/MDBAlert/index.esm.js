import t,{useState as e,useRef as n,useEffect as r,useCallback as o}from"react";import a from"react-dom";import i from"clsx";var c=function(){return c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},c.apply(this,arguments)};var l=function(l){var s=l.className,f=l.alertRef,u=l.position,p=l.delay,d=l.autohide,m=l.width,h=l.containerRef,v=l.offset,y=l.appendToBody,g=l.color,b=l.children,w=l.triggerRef,O=l.show,x=l.stacking,k=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(l,["className","alertRef","position","delay","autohide","width","containerRef","offset","appendToBody","color","children","triggerRef","show","stacking"]),T=e(O),j=T[0],L=T[1],P=e(O),R=P[0],E=P[1],N=e({}),S=N[0],A=N[1],B=e(j?"block":"none"),H=B[0],I=B[1],q=e(0),F=q[0],z=q[1],C=n(null),D=f||C,G=i("alert","fade",u&&!h&&"alert-fixed",u&&"alert-".concat(u),h&&"alert-absolute",g?"alert-".concat(g):"alert-primary",j&&R&&"show",x&&"stacking-alert",s);r((function(){j&&I("block"),j||R||I("none")}),[j,R,D]),r((function(){var t,e;if(u){var n=u.split("-")[0],r=u.split("-")[1],o="top"===n?"bottom":"top",a="left"===r?"right":"left";A("center"===r?((t={})[n]="".concat(void 0!==v?v+F:F,"px"),t.left="50%",t[o]="unset",t.transform="translate(-50%)",t):((e={})[n]="".concat(void 0!==v?v+F:F,"px"),e[r]="".concat(v,"px"),e[o]="unset",e[a]="unset",e.transform="unset",e))}}),[v,u,F]);var J=o((function(){L(!0)}),[]);r((function(){L(O)}),[O]),r((function(){if(x&&j){var t=document.querySelectorAll(".alert-".concat(u)),e=0,n=h?"alert-absolute":"alert-fixed",r=Array.from(t).filter((function(t){return t.classList.contains("show")&&t!==D.current&&t.classList.contains(n)&&t.classList.contains("stacking-alert")}));if(r.length>0){var o=void 0;o="top"===(null==u?void 0:u.split("-")[0])?r[r.length-1].offsetTop+r[r.length-1].offsetHeight:parseInt(r[r.length-1].style.bottom)+r[r.length-1].offsetHeight,e=v?o+v:o}z(e)}}),[x,j,D,F,v,u,h]),r((function(){if(null!=w){var t=w.current;return w.current.addEventListener("click",J),function(){t.removeEventListener("click",J)}}}),[w,J]),r((function(){null!=h&&h.current.classList.add("parent-alert-relative")}),[h]),r((function(){var t;return d&&j&&(t=setTimeout((function(){L(!1)}),p)),function(){clearTimeout(t)}}),[d,j,p]),r((function(){var t,e;return j?t=setTimeout((function(){E(!0)}),100):j||(e=setTimeout((function(){E(!1)}),100)),function(){clearTimeout(t),clearTimeout(e)}}),[j,d]);var K=t.createElement("div",c({className:G,ref:D,style:c(c({},S),{width:"unset"===m?m:"".concat(m,"px"),display:H})},k),b);return j||R?y?a.createPortal(K,document.body):K:t.createElement(t.Fragment,null)};l.defaultProps={offset:10,width:"width",delay:1e3,show:!1,stacking:!1};export{l as default};
