import t,{useState as e,useRef as r,useEffect as n,useCallback as o}from"react";import a from"react-dom";import i from"clsx";var l=function(){return l=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},l.apply(this,arguments)};var c=function(c){var s=c.className,f=c.alertRef,u=c.position,p=c.delay,d=c.autohide,m=c.width,v=c.containerRef,y=c.offset,h=c.appendToBody,g=c.color,b=c.children,w=c.triggerRef,O=c.show,x=c.stacking,k=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}(c,["className","alertRef","position","delay","autohide","width","containerRef","offset","appendToBody","color","children","triggerRef","show","stacking"]),T=e(O),j=T[0],L=T[1],P=e(O),R=P[0],E=P[1],N=e({}),S=N[0],A=N[1],B=e(j?"block":"none"),I=B[0],q=B[1],F=e(0),z=F[0],C=F[1],D=r(null),G=f||D,H=i("alert","fade",u&&!v&&"alert-fixed",u&&"alert-"+u,v&&"alert-absolute",g?"alert-"+g:"alert-primary",j&&R&&"show",x&&"stacking-alert",s);n((function(){j&&q("block"),j||R||q("none")}),[j,R,G]),n((function(){var t,e;if(u){var r=u.split("-")[0],n=u.split("-")[1],o="top"===r?"bottom":"top",a="left"===n?"right":"left";A("center"===n?((t={})[r]=(y&&y+z)+"px",t.left="50%",t[o]="unset",t.transform="translate(-50%)",t):((e={})[r]=(y&&y+z)+"px",e[n]=y+"px",e[o]="unset",e[a]="unset",e.transform="unset",e))}}),[y,u,z]);var J=o((function(){L(!0)}),[]);n((function(){L(O)}),[O]),n((function(){if(x&&j){var t=document.querySelectorAll(".alert-"+u),e=0,r=v?"alert-absolute":"alert-fixed",n=Array.from(t).filter((function(t){return t.classList.contains("show")&&t!==G.current&&t.classList.contains(r)&&t.classList.contains("stacking-alert")}));if(n.length>0){var o=void 0;o="top"===(null==u?void 0:u.split("-")[0])?n[n.length-1].style.top:n[n.length-1].style.bottom;var a=parseInt(o.split("px")[0]);e=y?a+y:a}C(e)}}),[x,j,G,z,y,u,v]),n((function(){if(null!=w){var t=w.current;return w.current.addEventListener("click",J),function(){t.removeEventListener("click",J)}}}),[w,J]),n((function(){null!=v&&v.current.classList.add("parent-alert-relative")}),[v]),n((function(){var t;return d&&j&&(t=setTimeout((function(){L(!1)}),p)),function(){clearTimeout(t)}}),[d,j,p]),n((function(){var t,e;return j?t=setTimeout((function(){E(!0)}),100):j||(e=setTimeout((function(){E(!1)}),100)),function(){clearTimeout(t),clearTimeout(e)}}),[j,d]);var K=t.createElement("div",l({className:H,ref:G,style:l(l({},S),{width:"unset"===m?m:m+"px",display:I})},k),b);return j||R?h?a.createPortal(K,document.body):K:t.createElement(t.Fragment,null)};c.defaultProps={offset:10,width:"width",delay:1e3,show:!1,stacking:!1};export{c as default};
