"use strict";var t=require("react"),e=require("react-dom"),n=require("clsx");function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r(t),a=r(e),c=r(n),l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},l.apply(this,arguments)};var i=function(e){var n=e.className,r=e.alertRef,i=e.position,f=e.delay,s=e.autohide,u=e.width,d=e.containerRef,p=e.offset,h=e.appendToBody,v=e.color,m=e.children,y=e.triggerRef,g=e.show,b=e.stacking,w=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["className","alertRef","position","delay","autohide","width","containerRef","offset","appendToBody","color","children","triggerRef","show","stacking"]),E=t.useState(g),O=E[0],k=E[1],x=t.useState(g),T=x[0],S=x[1],j=t.useState({}),R=j[0],L=j[1],P=t.useState(O?"block":"none"),q=P[0],N=P[1],A=t.useState(0),B=A[0],H=A[1],I=t.useRef(null),C=r||I,F=c.default("alert","fade",i&&!d&&"alert-fixed",i&&"alert-".concat(i),d&&"alert-absolute",v?"alert-".concat(v):"alert-primary",O&&T&&"show",b&&"stacking-alert",n);t.useEffect((function(){O&&N("block"),O||T||N("none")}),[O,T,C]),t.useEffect((function(){var t,e;if(i){var n=i.split("-")[0],r=i.split("-")[1],o="top"===n?"bottom":"top",a="left"===r?"right":"left";L("center"===r?((t={})[n]="".concat(void 0!==p?p+B:B,"px"),t.left="50%",t[o]="unset",t.transform="translate(-50%)",t):((e={})[n]="".concat(void 0!==p?p+B:B,"px"),e[r]="".concat(p,"px"),e[o]="unset",e[a]="unset",e.transform="unset",e))}}),[p,i,B]);var z=t.useCallback((function(){k(!0)}),[]);t.useEffect((function(){k(g)}),[g]),t.useEffect((function(){if(b&&O){var t=document.querySelectorAll(".alert-".concat(i)),e=0,n=d?"alert-absolute":"alert-fixed",r=Array.from(t).filter((function(t){return t.classList.contains("show")&&t!==C.current&&t.classList.contains(n)&&t.classList.contains("stacking-alert")}));if(r.length>0){var o=void 0;o="top"===(null==i?void 0:i.split("-")[0])?r[r.length-1].offsetTop+r[r.length-1].offsetHeight:parseInt(r[r.length-1].style.bottom)+r[r.length-1].offsetHeight,e=p?o+p:o}H(e)}}),[b,O,C,B,p,i,d]),t.useEffect((function(){if(null!=y){var t=y.current;return y.current.addEventListener("click",z),function(){t.removeEventListener("click",z)}}}),[y,z]),t.useEffect((function(){null!=d&&d.current.classList.add("parent-alert-relative")}),[d]),t.useEffect((function(){var t;return s&&O&&(t=setTimeout((function(){k(!1)}),f)),function(){clearTimeout(t)}}),[s,O,f]),t.useEffect((function(){var t,e;return O?t=setTimeout((function(){S(!0)}),100):O||(e=setTimeout((function(){S(!1)}),100)),function(){clearTimeout(t),clearTimeout(e)}}),[O,s]);var D=o.default.createElement("div",l({className:F,ref:C,style:l(l({},R),{width:"unset"===u?u:"".concat(u,"px"),display:q})},w),m);return O||T?h?a.default.createPortal(D,document.body):D:o.default.createElement(o.default.Fragment,null)};i.defaultProps={offset:10,width:"width",delay:1e3,show:!1,stacking:!1},module.exports=i;
