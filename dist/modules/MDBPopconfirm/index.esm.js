import e from"clsx";import t,{useState as n,useEffect as r,useCallback as o}from"react";import a from"react-dom";import{usePopper as i}from"react-popper";var l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};function c(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var p=function(o){var a=c(o,[]),i=n(!1),p=i[0],s=i[1],u=e("ripple-wave",p&&"active");return r((function(){var e=setTimeout((function(){s(!0)}),50);return function(){clearTimeout(e)}}),[]),t.createElement("div",l({className:u},a))},s=t.forwardRef((function(o,a){var i=o.className,s=o.rippleTag,u=o.rippleCentered,f=o.rippleDuration,m=o.rippleUnbound,d=o.rippleRadius,g=o.rippleColor,b=o.children,h=o.onClick,v=c(o,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick"]),y=[0,0,0],C=["primary","secondary","success","danger","warning","info","light","dark"],k=n([]),w=k[0],N=k[1],x=n(!1),E=x[0],T=x[1],O=e("ripple","ripple-surface",m&&"ripple-surface-unbound",E&&"ripple-surface-"+g,i),R=function(){if(C.find((function(e){return e===(null==g?void 0:g.toLowerCase())})))return T(!0);var e=P(g).join(",");return"radial-gradient(circle, "+"rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join(""+e)+")"},P=function(e){return"transparent"===e.toLowerCase()?y:"#"===e[0]?function(e){return e.length<7&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e):(-1===e.indexOf("rgb")&&(e=function(e){var t=document.body.appendChild(document.createElement("fictum")),n="rgb(1, 2, 3)";return t.style.color=n,t.style.color!==n?y:(t.style.color=e,t.style.color===n||""===t.style.color?y:(e=getComputedStyle(t).color,document.body.removeChild(t),e))}(e)),0===e.indexOf("rgb")?function(e){return(e=e.match(/[.\d]+/g).map((function(e){return+Number(e)}))).length=3,e}(e):y)},j=function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=t.height,a=t.width,i=f&&.5*f,c=f&&f-.5*f,p=function(e){var t=e.offsetX,n=e.offsetY,r=e.height,o=e.width,a=n<=r/2,i=t<=o/2,l=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},c=n===r/2&&t===o/2,p=!0===a&&!1===i,s=!0===a&&!0===i,u=!1===a&&!0===i,f=!1===a&&!1===i,m={topLeft:l(t,n),topRight:l(o-t,n),bottomLeft:l(t,r-n),bottomRight:l(o-t,r-n)},d=0;return c||f?d=m.topLeft:u?d=m.topRight:s?d=m.bottomRight:p&&(d=m.bottomLeft),2*d}({offsetX:u?o/2:n,offsetY:u?a/2:r,height:o,width:a}),s=d||p/2,m={left:u?a/2-s+"px":n-s+"px",top:u?o/2-s+"px":r-s+"px",height:d?2*d+"px":p+"px",width:d?2*d+"px":p+"px",transitionDelay:"0s, "+i+"ms",transitionDuration:f+"ms, "+c+"ms"};return E?m:l(l({},m),{backgroundImage:""+R()})};return r((function(){var e=setTimeout((function(){w.length>0&&N(w.splice(1,w.length-1))}),f);return function(){clearTimeout(e)}}),[f,w]),t.createElement(s,l({className:O,onClick:function(e){return function(e){var t=j(e),n=w.concat(t);N(n),h&&h(e)}(e)},ref:a},v),b,w.map((function(e,n){return t.createElement(p,{key:n,style:e})})))}));s.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var u=t.forwardRef((function(r,o){var a=r.className,i=r.color,p=r.outline,u=r.children,f=r.rounded,m=r.disabled,d=r.floating,g=r.size,b=r.href,h=r.block,v=r.active,y=r.toggle,C=r.noRipple,k=r.tag,w=c(r,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),N=n(v||!1),x=N[0],E=N[1],T=i&&["light","link"].includes(i)||p?"dark":"light",O=e("none"!==i&&"btn","none"!==i?p?i?"btn-outline-"+i:"btn-outline-primary":i?"btn-"+i:"btn-primary":"",f&&"btn-rounded",d&&"btn-floating",g&&"btn-"+g,(b||"button"!==k)&&m?"disabled":"",h&&"btn-block",x&&"active",a);return b&&"a"!==k&&(k="a"),["hr","img","input"].includes(k)||C?t.createElement(k,l({className:O,onClick:y?function(){E(!x)}:void 0,disabled:!(!m||"button"!==k)||void 0,href:b,ref:o},w),u):t.createElement(s,l({rippleTag:k,rippleColor:T,className:O,onClick:y?function(){E(!x)}:void 0,disabled:!(!m||"button"!==k)||void 0,href:b,ref:o},w),u)}));u.defaultProps={tag:"button",role:"button",color:"primary"};var f=t.forwardRef((function(n,r){var o=n.className,a=n.tag,i=n.children,p=c(n,["className","tag","children"]),s=e("popconfirm-buttons-container",o);return t.createElement(a,l({className:s,ref:r},p),i)}));f.defaultProps={tag:"div"};var m=function(p){var s=p.className,m=p.btnClassName,d=p.btnChildren,g=p.confirmBtnText,b=p.cancelBtnText,h=p.placement,v=p.tag,y=p.children,C=p.modal,k=p.poperStyle,w=p.onClick,N=p.onConfirm,x=p.options,E=p.popperTag,T=c(p,["className","btnClassName","btnChildren","confirmBtnText","cancelBtnText","placement","tag","children","modal","poperStyle","onClick","onConfirm","options","popperTag"]),O=n(),R=O[0],P=O[1],j=n(),L=j[0],B=j[1],D=n(!1),I=D[0],S=D[1],z=n(!1),M=z[0],X=z[1],Y=n(!1),F=Y[0],U=Y[1],q=i(R,L,l({placement:h},x)),A=q.styles,G=q.attributes,H=e(C?"popconfirm-modal":"popconfirm-popover","shadow-4",s),J=e("popconfirm",!C&&"fade",M&&"show"),K=o((function(e){var t=R===e.target,n=e.target===L,r=L&&L.contains(e.target),o=null==R?void 0:R.contains(e.target);t||n||r||o||S(!1)}),[L,R]);r((function(){I?(U(!0),setTimeout((function(){X(!0)}),0)):(X(!1),C?U(!1):setTimeout((function(){U(!1)}),150))}),[I,C]),r((function(){return window.addEventListener("click",K),function(){window.removeEventListener("click",K)}}),[K]);var Q=t.createElement("div",{className:J},y,t.createElement(f,null,t.createElement(u,{onClick:function(){return S(!1)},color:"float",size:"sm"},b),t.createElement(u,{onClick:function(e){N&&N(e),S(!1)},size:"sm"},g)));return t.createElement(t.Fragment,null,t.createElement(v,l({onClick:function(e){S(!0),w&&w(e)},className:m},T,{ref:P}),d),F&&a.createPortal(t.createElement(t.Fragment,null,C?t.createElement("div",{className:"popconfirm-backdrop"},t.createElement(E,{ref:B,className:H},Q)):t.createElement(E,l({className:H,ref:B,style:l(l({},A.popper),k)},G.popper,{"data-testid":"popoverTestID"}),Q)),document.body))};m.defaultProps={tag:u,popperTag:"div",placement:"top",modal:!1,cancelBtnText:"Cancel",confirmBtnText:"Ok"};export{m as default};
