"use strict";var t=require("clsx"),e=require("react");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=n(t),o=n(e),r=function(){return r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function l(t){var e=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}(t),n=t.getBoundingClientRect(),i=0===e.left&&0===e.top?0:window.innerHeight-n.bottom;return r(r({},e),{bottom:i})}var c=function(t){var n=t.className,c=t.stickyRef,u=t.stickyAnimationSticky,s=t.stickyAnimationUnsticky,a=t.stickyBoundary,f=t.stickyDelay,y=t.stickyDirection,p=t.stickyOffset,d=t.stickyPosition,h=t.tag,m=t.children,g=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n}(t,["className","stickyRef","stickyAnimationSticky","stickyAnimationUnsticky","stickyBoundary","stickyDelay","stickyDirection","stickyOffset","stickyPosition","tag","children"]),k=e.useRef(null),b=e.useRef(null),v=c||k,w=e.useRef(""),x=e.useRef(!1),O=e.useRef(0),R=e.useRef(0),E=e.useRef(0),C=e.useState(),S=C[0],B=C[1],j=e.useState(),P=j[0],A=j[1],D=e.useState(!1),z=D[0],L=D[1],T=e.useState({}),I=T[0],N=T[1],q=e.useState(!1),U=q[0],H=q[1],F=i.default("sticky",u&&z&&"animation "+u,s&&U&&"animation "+s,n),Y=e.useCallback((function(){var t=b.current,e=v.current;O.current=t?t.offsetTop:e.offsetTop}),[v]),G=e.useCallback((function(){var t=v.current;t&&(E.current="top"===d?O.current-f:O.current+t.height-document.body.scrollHeight+f)}),[f,d,v]),J=e.useCallback((function(t){t>R.current?w.current="down":w.current="up"}),[]),K=function(t,e){Object.keys(e).forEach((function(n){t.style[n]=e[n]}))},M=e.useCallback((function(){var t=b.current,e=v.current;if(t){var n=t.getBoundingClientRect().left;N({left:n+"px"})}else N({});K(e,I),Y()}),[Y,I,v]),Q=e.useCallback((function(){var t,e=v.current,n=e.getBoundingClientRect().height,i=r({height:e.parentElement.getBoundingClientRect().height},l(e.parentElement)),o=document.querySelector(a);t=o?l(o).top-n-p:i.height+i[d]-n-p;var c,u="top"===d,s="bottom"===d,f=a,y=t<0,h=t>i.height-n;u&&(c=y&&f?{top:p+t+"px"}:{top:p+0+"px"}),s&&(c=y&&f?{bottom:p+t+"px"}:h&&f?{bottom:p+i.bottom+"px"}:{bottom:p+0+"px"}),K(e,c)}),[a,p,d,v]),V=e.useCallback((function(){var t=window.pageYOffset||document.documentElement.scrollTop;Y(),G(),J(t);var e=[w.current,"both"].includes(y),n=E.current<=t,i=n&&!x.current&&e,o=(!n||!e)&&x.current;if(i){var r=v.current.getBoundingClientRect(),l=r.height,c=r.left,u=r.width;L(!0),A({height:l+"px",width:u+"px",opacity:"0"}),B({top:"top"===d?0+p+"px":null,bottom:"bottom"===d?0+p+"px":null,height:l+"px",width:u+"px",left:c+"px",zIndex:"100",position:"fixed"}),Q(),x.current=!0}o&&(s?(H(!0),setTimeout((function(){B({top:null,bottom:null,position:null,left:null,zIndex:null,width:null,height:null}),L(!1),A({height:null,width:null,opacity:null}),H(!1)}),200)):(B({top:null,bottom:null,position:null,left:null,zIndex:null,width:null,height:null}),L(!1),A({height:null,width:null,opacity:null})),x.current=!1),x.current&&(K(v.current,I),Q()),R.current=t<=0?0:t}),[y,Y,G,J,p,d,v,I,Q,s]);return e.useEffect((function(){return window.addEventListener("resize",M),window.addEventListener("scroll",V),function(){window.removeEventListener("resize",M),window.removeEventListener("scroll",V)}}),[M,V]),o.default.createElement(o.default.Fragment,null,z&&o.default.createElement(h,r({className:F,ref:b,style:P},g),m),o.default.createElement(h,r({className:F,ref:v,style:S},g),m))};c.defaultProps={stickyAnimationSticky:"",stickyAnimationUnsticky:"",tag:"span",stickyBoundary:!1,stickyDelay:0,stickyDirection:"down",stickyOffset:0,stickyPosition:"top"},module.exports=c;
