import e from"clsx";import t,{useState as r,useEffect as n,useRef as i,useCallback as o}from"react";var l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function c(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}var s=t.createContext({activeItem:1,setActiveItem:null,stepperHeight:0,setStepperHeight:null,prevState:1,setPrevState:null,steps:[],linear:!1,visited:[],setVisited:null,noEditable:!1,vertical:!1,mobile:!1,verticalBreakpoint:!1}),p=function(i){var o=a(i,[]),c=r(!1),s=c[0],p=c[1],u=e("ripple-wave",s&&"active");return n((function(){var e=setTimeout((function(){p(!0)}),50);return function(){clearTimeout(e)}}),[]),t.createElement("div",l({className:u},o))},u=t.forwardRef((function(i,o){var c=i.className,s=i.rippleTag,u=i.rippleCentered,d=i.rippleDuration,f=i.rippleUnbound,m=i.rippleRadius,b=i.rippleColor,g=i.children,v=i.onClick,h=a(i,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick"]),y=[0,0,0],w=["primary","secondary","success","danger","warning","info","light","dark"],E=r([]),k=E[0],N=E[1],C=r(!1),x=C[0],O=C[1],S=e("ripple","ripple-surface",f&&"ripple-surface-unbound",x&&"ripple-surface-"+b,c),P=function(){if(w.find((function(e){return e===(null==b?void 0:b.toLowerCase())})))return O(!0);var e=R(b).join(",");return"radial-gradient(circle, "+"rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join(""+e)+")"},R=function(e){return"transparent"===e.toLowerCase()?y:"#"===e[0]?function(e){return e.length<7&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e):(-1===e.indexOf("rgb")&&(e=function(e){var t=document.body.appendChild(document.createElement("fictum")),r="rgb(1, 2, 3)";return t.style.color=r,t.style.color!==r?y:(t.style.color=e,t.style.color===r||""===t.style.color?y:(e=getComputedStyle(t).color,document.body.removeChild(t),e))}(e)),0===e.indexOf("rgb")?function(e){return(e=e.match(/[.\d]+/g).map((function(e){return+Number(e)}))).length=3,e}(e):y)},j=function(e){var t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top,i=t.height,o=t.width,a=d&&.5*d,c=d&&d-.5*d,s=function(e){var t=e.offsetX,r=e.offsetY,n=e.height,i=e.width,o=r<=n/2,l=t<=i/2,a=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},c=r===n/2&&t===i/2,s=!0===o&&!1===l,p=!0===o&&!0===l,u=!1===o&&!0===l,d=!1===o&&!1===l,f={topLeft:a(t,r),topRight:a(i-t,r),bottomLeft:a(t,n-r),bottomRight:a(i-t,n-r)},m=0;return c||d?m=f.topLeft:u?m=f.topRight:p?m=f.bottomRight:s&&(m=f.bottomLeft),2*m}({offsetX:u?i/2:r,offsetY:u?o/2:n,height:i,width:o}),p=m||s/2,f={left:u?o/2-p+"px":r-p+"px",top:u?i/2-p+"px":n-p+"px",height:m?2*m+"px":s+"px",width:m?2*m+"px":s+"px",transitionDelay:"0s, "+a+"ms",transitionDuration:d+"ms, "+c+"ms"};return x?f:l(l({},f),{backgroundImage:""+P()})};return n((function(){var e=setTimeout((function(){k.length>0&&N(k.splice(1,k.length-1))}),d);return function(){clearTimeout(e)}}),[d,k]),t.createElement(s,l({className:S,onClick:function(e){return function(e){var t=j(e),r=k.concat(t);N(r),v&&v(e)}(e)},ref:o},h),g,k.map((function(e,r){return t.createElement(p,{key:r,style:e})})))}));u.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var d=t.forwardRef((function(n,i){var o=n.className,c=n.color,s=n.outline,p=n.children,d=n.rounded,f=n.disabled,m=n.floating,b=n.size,g=n.href,v=n.block,h=n.active,y=n.toggle,w=n.noRipple,E=n.tag,k=a(n,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),N=r(h||!1),C=N[0],x=N[1],O=c&&["light","link"].includes(c)||s?"dark":"light",S=e("none"!==c&&"btn","none"!==c?s?c?"btn-outline-"+c:"btn-outline-primary":c?"btn-"+c:"btn-primary":"",d&&"btn-rounded",m&&"btn-floating",b&&"btn-"+b,(g||"button"!==E)&&f?"disabled":"",v&&"btn-block",C&&"active",o);return g&&"a"!==E&&(E="a"),["hr","img","input"].includes(E)||w?t.createElement(E,l({className:S,onClick:y?function(){x(!C)}:void 0,disabled:!(!f||"button"!==E)||void 0,href:g,ref:i},k),p):t.createElement(u,l({rippleTag:E,rippleColor:O,className:S,onClick:y?function(){x(!C)}:void 0,disabled:!(!f||"button"!==E)||void 0,href:g,ref:i},k),p)}));function f(e,t,r,n){r&&n[e].classList[t](r)}function m(e,t,r,n){var i=t.length,o=!0;if(e===r-1&&(o=!1),(e>=i||e<0)&&(o=!1),n&&(e>r&&(o=!1),e>r-1||e===i-1)){var l=t[r-1];Array.prototype.slice.call(l.querySelectorAll("input[required]")).every((function(e){return!0===e.checkValidity()}))||(!function(e,t){f(e,"add","stepper-invalid",t),f(e,"remove","stepper-completed",t),f(e,"add","",t),f(e,"remove","",t)}(r-1,t),o=!1)}return o}d.defaultProps={tag:"button",role:"button",color:"primary"};var b=function(p){var u=p.className,f=p.outerState,b=p.linear,g=p.formWizard,v=p.setOuterState,h=p.prevOuterState,y=p.noEditable,w=p.setPrevOuterState,E=p.mobileProgress,k=p.stepperRef,N=p.vertical,C=p.mobile,x=p.mobileBreakpoint,O=p.verticalBreakpoint,S=p.tag,P=p.children,R=a(p,["className","outerState","linear","formWizard","setOuterState","prevOuterState","noEditable","setPrevOuterState","mobileProgress","stepperRef","vertical","mobile","mobileBreakpoint","verticalBreakpoint","tag","children"]),j=r(1),I=j[0],L=j[1],T=r(0),B=T[0],z=T[1],W=r(0),A=W[0],D=W[1],q=r([]),H=q[0],X=q[1],M=r([]),V=M[0],Y=M[1],U=r(!!O||N),F=U[0],K=U[1],G=r(x?x>window.innerWidth:C),J=G[0],Q=G[1],Z=e("stepper",F?"stepper-vertical":J?"stepper-mobile":"stepper-horizontal",E&&"stepper-progress-bar",u);n((function(){O<window.innerWidth&&K(!1)}),[O]);var $=i(null),_=k||$,ee=o((function(){var e=O<window.innerWidth,t=O>window.innerWidth,r=x>window.innerWidth;e&&(Q(!1),K(!1)),t&&!r&&(Q(!1),K(!0)),r&&(Q(!0),K(!1))}),[x,O]);n((function(){if(x||O)return window.addEventListener("resize",ee),function(){window.removeEventListener("resize",ee)}}),[x,O,ee]),n((function(){var e=_.current.querySelectorAll(".stepper-step");X(e)}),[_]);return t.createElement(s.Provider,{value:{activeItem:f||I,setActiveItem:v||L,stepperHeight:A,setStepperHeight:D,prevState:h||B,setPrevState:w||z,steps:H,linear:b,visited:V,setVisited:Y,noEditable:y,vertical:F,mobile:J,verticalBreakpoint:!!O}},t.createElement(t.Fragment,null,t.createElement(S,l({className:Z,ref:_},R,{style:{height:!F&&A+"px"}}),J&&t.createElement("div",{className:"stepper-mobile-head bg-light"},"step ",I," of ",H.length),P,J&&t.createElement("div",{className:"stepper-mobile-footer bg-light"},t.createElement("div",{className:"stepper-back-btn"},t.createElement("button",{className:"btn btn-link",onClick:function(){1!==I&&z(I),I>=2&&L(I-1)}},t.createElement("i",{className:"fas fa-chevron-left"}),"BACK")),E&&t.createElement("div",{className:"stepper-mobile-progress gray-500"},t.createElement("div",{className:"stepper-mobile-progress-bar bg-primary",style:{width:I/H.length*100+"%"}})),t.createElement("div",{className:"stepper-next-btn"},t.createElement("button",{className:"btn btn-link ripple-surface",onClick:function(){I!==H.length&&z(I),I<=H.length-1&&L(I+1)}},"NEXT",t.createElement("i",{className:"fas fa-chevron-right"}))))),g&&t.createElement("div",{className:"d-flex justify-content-center px-3"},t.createElement(d,{onClick:function(){1!==I&&z(I),I>=2&&L(I-1)},className:"btn btn-primary w-100 me-2 ripple-surface"},"Previous step"),t.createElement(d,{onClick:function(){if(I!==H.length){if(b)if(V.includes(I)||Y(c(c([],V),[I])),!m(I,H,I,b))return;y&&(V.includes(I)||Y(c(c([],V),[I])),V.includes(I+1))||(z(I),L(I+1))}},className:"btn btn-primary w-100"},"Next step"))))};b.defaultProps={tag:"ul"};export{b as default};
